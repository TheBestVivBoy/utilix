<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Utilix — Home</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet" />
  <style>
    :root{
      --bg:#050114;--bg-alt:#120b2c;--fg:#f5f4ff;--fg-muted:rgba(245,244,255,0.66);
      --accent:#b266f2;--accent2:#6c3ff6;--panel:rgba(17,11,35,0.84);
      --border:rgba(255,255,255,0.08);--shadow-sm:0 18px 30px rgba(9,5,27,0.32);
      --radius-lg:18px;--transition:220ms ease;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    body{font-family:"Inter",system-ui,-apple-system,sans-serif;background:radial-gradient(circle at 20% 20%,rgba(122,68,212,0.22),transparent 45%),radial-gradient(circle at 80% 10%,rgba(178,102,242,0.18),transparent 40%),var(--bg);color:var(--fg);min-height:100vh;display:flex;flex-direction:column;position:relative;overflow-x:hidden}
    body::before{content:"";position:fixed;inset:0;background:radial-gradient(circle at 50% 0%,rgba(110,52,220,0.18),transparent 65%);pointer-events:none;z-index:0}
    a{color:inherit;text-decoration:none;transition:all var(--transition)}
    a:hover{color:var(--accent)}

    header{position:fixed;top:0;left:0;right:0;height:80px;padding:0 2.4rem;display:flex;align-items:center;justify-content:space-between;background:rgba(8,4,22,0.78);backdrop-filter:blur(16px);border-bottom:1px solid var(--border);box-shadow:0 12px 45px rgba(5,3,18,0.45);z-index:1200}
    .header-left{display:flex;align-items:center;gap:1.8rem}
    .logo-group{display:flex;flex-direction:column;gap:2px}
    .logo{font-size:1.45rem;font-weight:800;letter-spacing:.04em;background:linear-gradient(90deg,var(--accent),var(--accent2));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
    .logo-tagline{font-size:.75rem;text-transform:uppercase;letter-spacing:.18em;color:var(--fg-muted)}
    .header-nav ul{display:flex;gap:1rem;list-style:none;padding:.35rem .6rem;border-radius:999px;background:rgba(255,255,255,.04);border:1px solid var(--border)}
    .header-nav a{display:inline-flex;align-items:center;gap:.35rem;padding:.45rem .95rem;border-radius:999px;font-weight:600;font-size:.82rem;color:var(--fg-muted)}
    .header-nav a.active{background:linear-gradient(90deg,rgba(178,102,242,.22),rgba(108,63,246,.22));color:var(--fg);box-shadow:0 12px 30px rgba(108,63,246,.25)}
    .header-nav a:hover{color:var(--fg)}

    .header-right{display:flex;align-items:center;gap:1rem}
    .auth-wrapper{display:flex;align-items:center;gap:.75rem;padding:.35rem .65rem;border-radius:999px;background:rgba(255,255,255,.05);border:1px solid var(--border)}
    .user-display{font-weight:600;font-size:.85rem}
    .logout-btn{color:#ff7b9c;font-weight:600;font-size:.85rem}
    .logout-btn:hover{opacity:.8}

    .discord-btn{padding:.55rem 1.15rem;border-radius:999px;background:linear-gradient(120deg,var(--accent),var(--accent2));color:#fff;font-weight:600;font-size:.85rem;box-shadow:0 12px 38px rgba(108,63,246,.35);text-decoration:none;transition:all var(--transition)}
    .discord-btn:hover{transform:translateY(-1px);box-shadow:0 15px 40px rgba(108,63,246,.4)}
    .discord-btn--ghost{background:rgba(255,255,255,.06);color:var(--fg);box-shadow:none;border:1px solid rgba(255,255,255,.08)}
    .discord-btn--ghost:hover{background:rgba(255,255,255,.12)}
    .discord-btn--login{position:relative;overflow:hidden;z-index:1}
    .discord-btn--login::before{content:"";position:absolute;inset:0;background:radial-gradient(circle at center,rgba(178,102,242,.4),transparent 60%);opacity:0;transition:opacity .4s;z-index:-1}
    .discord-btn--login:hover::before{opacity:1}
    .discord-btn--login::after{content:"";position:absolute;inset:-2px;border-radius:999px;background:linear-gradient(120deg,var(--accent),var(--accent2));opacity:0;filter:blur(12px);transition:opacity .4s;z-index:-2}
    .discord-btn--login:hover::after{opacity:.6}

    /* ───── CONTENT ───── */
    .canvas-wrap{position:fixed;inset:0;z-index:0;pointer-events:none}
    canvas#starfield{width:100%;height:100%;display:block}
    .page{flex:1;width:min(1180px,calc(100% - 48px));margin:0 auto;padding:140px 0 72px;display:flex;flex-direction:column;gap:4rem;position:relative;z-index:1}

    /* HERO */
    .hero{position:relative;text-align:center;padding:4.5rem 2rem;background:var(--panel);border-radius:var(--radius-lg);border:1px solid var(--border);box-shadow:var(--shadow-sm);backdrop-filter:blur(12px);overflow:hidden}
    .hero::before{content:"";position:absolute;inset:0;background:linear-gradient(135deg,rgba(178,102,242,.12),transparent 60%);opacity:.6;z-index:-1}
    .hero h1{font-size:3.8rem;font-weight:800;background:linear-gradient(90deg,var(--accent),var(--accent2));-webkit-background-clip:text;-webkit-text-fill-color:transparent;margin-bottom:.6rem;animation:float 6s ease-in-out infinite}
    .hero h2{font-size:1.8rem;font-weight:600;color:var(--fg);margin-bottom:1.2rem}
    .hero p{color:var(--fg-muted);font-size:1.1rem;max-width:780px;margin:0 auto 2rem;line-height:1.65}
    .hero-buttons{display:flex;justify-content:center;gap:1.2rem;flex-wrap:wrap}
    .orb{position:absolute;border-radius:50%;background:radial-gradient(circle at 30% 30%,rgba(178,102,242,.3),transparent 70%);filter:blur(40px);opacity:.7;pointer-events:none;animation:float 10s infinite ease-in-out;z-index:-1}
    .orb:nth-child(1){width:180px;height:180px;top:10%;left:10%;animation-delay:0s}
    .orb:nth-child(2){width:240px;height:240px;bottom:15%;right:8%;animation-delay:3s}
    .orb:nth-child(3){width:140px;height:140px;top:50%;left:5%;animation-delay:6s}

    @keyframes float{
      0%,100%{transform:translateY(0) translateX(0)}
      50%{transform:translateY(-25px) translateX(15px)}
    }

    .stats{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:1.8rem;text-align:center}
    .stat-item h3{font-size:2.4rem;font-weight:800;background:linear-gradient(90deg,var(--accent),var(--accent2));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
    .stat-item p{color:var(--fg-muted);font-size:1rem;margin-top:.4rem}

    /* FEATURES */
    .features{display:grid;gap:2rem;grid-template-columns:repeat(auto-fit,minmax(280px,1fr))}
    .feature{background:var(--panel);border-radius:var(--radius-lg);padding:2rem;border:1px solid var(--border);box-shadow:var(--shadow-sm);transition:all .4s ease;opacity:0;transform:translateY(30px);position:relative;overflow:hidden;cursor:pointer}
    .feature.visible{opacity:1;transform:translateY(0)}
    .feature::before{content:"";position:absolute;inset:0;background:linear-gradient(135deg,rgba(178,102,242,.15),transparent 70%);opacity:0;transition:opacity .4s;z-index:-1}
    .feature:hover::before{opacity:1}
    .feature:hover{transform:translateY(-10px) scale(1.02);box-shadow:0 25px 60px rgba(108,63,246,.3);border-color:rgba(178,102,242,.4)}
    .feature span{font-size:2.6rem;display:block;margin-bottom:1rem}
    .feature h3{font-size:1.35rem;font-weight:700;background:linear-gradient(90deg,var(--accent),var(--accent2));-webkit-background-clip:text;-webkit-text-fill-color:transparent;margin-bottom:.6rem}
    .feature p{color:var(--fg-muted);font-size:1rem;line-height:1.55}

    #back-to-top{position:fixed;bottom:32px;right:32px;width:52px;height:52px;border-radius:50%;background:linear-gradient(135deg,var(--accent),var(--accent2));color:#fff;display:flex;align-items:center;justify-content:center;font-size:1.5rem;opacity:0;visibility:hidden;transition:all .3s;z-index:1000;box-shadow:0 10px 30px rgba(108,63,246,.4);cursor:pointer}
    #back-to-top.show{opacity:1;visibility:visible}
    #back-to-top:hover{transform:scale(1.1);box-shadow:0 14px 38px rgba(108,63,246,.5)}

    @media(max-width:768px){
      header{padding:0 1.2rem}
      .page{width:calc(100% - 32px);padding-top:140px}
      .hero h1{font-size:2.8rem}
      .hero h2{font-size:1.4rem}
      .hero{padding:3.5rem 1.6rem}
      .hero-buttons{flex-direction:column;align-items:center}
      .stats{grid-template-columns:1fr 1fr}
      .orb{display:none}
      #back-to-top{bottom:20px;right:20px;width:46px;height:46px;font-size:1.3rem}
    }
  </style>
</head>
<body>

  <header>
    <div class="header-left">
      <div class="logo-group">
        <div class="logo">Utilix</div>
        <span class="logo-tagline"></span>
      </div>
      <nav class="header-nav" aria-label="Primary navigation">
        <ul>
          <li><a href="/index" class="active">Home</a></li>
          <li><a href="/setup">Setup</a></li>
          <li><a href="/faq">FAQ</a></li>
          <li><a href="/changelog">Changelog</a></li>
        </ul>
      </nav>
    </div>
    <div class="header-right" id="header-right"></div>
  </header>

  <!-- Starfield + Orbs -->
  <div class="canvas-wrap"><canvas id="starfield"></canvas></div>
  <div class="orb"></div>
  <div class="orb"></div>
  <div class="orb"></div>

  <main class="page">

    <section class="hero">
      <h1>Utilix</h1>
      <h2>Upgrade your server, elevate your community.</h2>
      <p>Utilix is the ultimate all-in-one Discord bot for moderation, tickets, utilities, and customization. Manage your server effortlessly with powerful tools, advanced moderation, and a fully customizable, intuitive dashboard.</p>
      <div class="hero-buttons">
        <a href="https://discord.com/oauth2/authorize?client_id=1392737327125762199&permissions=8&scope=bot%20applications.commands" class="discord-btn">Invite Bot</a>
        <a href="https://discord.gg/support-server" class="discord-btn discord-btn--ghost">Join Support</a>
      </div>
    </section>

    <!-- STATS -->
    <section class="stats">
      <div class="stat-item">
        <h3 data-count="10000">0</h3>
        <p>Members Protected</p>
      </div>
      <!--<div class="stat-item">
        <h3 data-count="N/A">0</h3>
        <p>Coming soon</p>
      </div>-->
      <div class="stat-item">
        <h3 data-count="99.9">0</h3>
        <p>Uptime (%)</p>
      </div>
      <!--<div class="stat-item">
        <h3 data-count="N/A">0</h3>
        <p>Coming soon</p>
      </div>-->
    </section>

    <section class="features">
      <div class="feature"><span>Ticketing</span><h3>Ticket System</h3><p>Create and manage support tickets with panels, permissions, and quick actions.</p></div>
      <div class="feature"><span>Shield</span><h3>Moderation Tools</h3><p>Kick, ban, mute, and manage users with transparent logs and history tracking.</p></div>
      <div class="feature"><span>Magnifying Glass</span><h3>Scam Database</h3><p>Community-powered reports and checks to protect your server from scams and malicious links.</p></div>
      <div class="feature"><span>Tools</span><h3>Utilities & Tools</h3><p>Handy automation and server management tools designed for admins.</p></div>
      <div class="feature"><span>Gamepad</span><h3>Minigames</h3><p>Fun interactive games to keep your community engaged and entertained.</p></div>
      <div class="feature"><span>Dashboard</span><h3>Web Dashboard</h3><p>Fully customizable dashboard to manage your server from anywhere.</p></div>
    </section>

  </main>

  <button id="back-to-top" aria-label="Back to top">Up Arrow</button>

  <script>
    // Starfield
    const canvas = document.getElementById('starfield');
    const ctx = canvas.getContext('2d');
    function resize() { canvas.width = innerWidth; canvas.height = innerHeight; }
    addEventListener('resize', resize); resize();
    const stars = [];
    for (let i = 0; i < 220; i++) {
      stars.push({
        x: Math.random() * canvas.width,
        y: Math.random() * canvas.height,
        r: Math.random() * 1.5 + 0.5,
        s: Math.random() * 0.6 + 0.1,
        color: `hsla(${Math.random() * 360}, 70%, 80%, 0.8)`
      });
    }
    function animate() {
      ctx.fillStyle = 'rgba(5,4,20,0.3)';
      ctx.fillRect(0, 0, canvas.width, canvas.height);
      stars.forEach(s => {
        s.y -= s.s;
        if (s.y < 0) s.y = canvas.height;
        ctx.beginPath();
        ctx.arc(s.x, s.y, s.r, 0, Math.PI * 2);
        ctx.fillStyle = s.color;
        ctx.fill();
      });
      requestAnimationFrame(animate);
    }
    animate();

    // Animate Stats
    function animateValue(obj, start, end, duration) {
      let startTime = null;
      const step = (currentTime) => {
        if (!startTime) startTime = currentTime;
        const progress = Math.min((currentTime - startTime) / duration, 1);
        const val = progress * (end - start) + start;
        obj.innerHTML = end % 1 === 0 ? Math.floor(val) : val.toFixed(1);
        if (progress < 1) requestAnimationFrame(step);
      };
      requestAnimationFrame(step);
    }
    const stats = document.querySelectorAll('.stat-item h3');
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const h3 = entry.target;
          const count = parseFloat(h3.dataset.count);
          animateValue(h3, 0, count, 2000);
          observer.unobserve(h3);
        }
      });
    }, { threshold: 0.5 });
    stats.forEach(h3 => observer.observe(h3));

    // Scroll Animations
    const features = document.querySelectorAll('.feature');
    const featureObserver = new IntersectionObserver((entries) => {
      entries.forEach((entry, i) => {
        if (entry.isIntersecting) {
          setTimeout(() => entry.target.classList.add('visible'), i * 100);
        }
      });
    }, { threshold: 0.1 });
    features.forEach(f => featureObserver.observe(f));

    // Back to Top
    const backBtn = document.getElementById('back-to-top');
    window.addEventListener('scroll', () => {
      backBtn.classList.toggle('show', window.scrollY > 600);
    });
    backBtn.addEventListener('click', () => {
      window.scrollTo({ top: 0, behavior: 'smooth' });
    });

    // Auth UI
    const right = document.getElementById('header-right');
    async function updateAuth() {
      try {
        const res = await fetch('/me');
        if (!res.ok) throw 0;
        const data = await res.json();
        if (!data.loggedIn) throw 0;

        const u = data.user;
        const av = u.avatar
          ? `https://cdn.discordapp.com/avatars/${u.id}/${u.avatar}.${u.avatar.startsWith('a_') ? 'gif' : 'png'}?size=64`
          : `https://cdn.discordapp.com/embed/avatars/${u.discriminator % 5}.png`;
        const name = `${u.username}#${u.discriminator}`;

        right.innerHTML = `
          <a href="/dashboard" class="discord-btn discord-btn--ghost">Servers</a>
          <a href="https://discord.com/oauth2/authorize?client_id=1392737327125762199&permissions=8&scope=bot%20applications.commands" class="discord-btn" target="_blank" rel="noopener">Add Bot</a>
          <div class="auth-wrapper">
            <img src="${av}" alt="Avatar" style="width:40px;height:40px;border-radius:50%;border:2px solid rgba(255,255,255,.2);">
            <span class="user-display">${name}</span>
            <a href="/logout" class="logout-btn">Logout</a>
          </div>`;
      } catch {
        right.innerHTML = `<a href="/login" class="discord-btn discord-btn--login">Log in with Discord</a>`;
      }
    }
    updateAuth();
  </script>
</body>
</html>
